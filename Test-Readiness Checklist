1. Test Case Integrity

All test cases in backend/tests/user_view_tests.json must contain:
id, category, description, input_text, and either expected_plan or expected_error.

If expected_plan exists, it must fully match the action schema:
task, steps, action, params.

Every step must match the currently supported action types in the backend.

No missing or undefined parameters are allowed.

All JSON structures must be valid and deterministic.

2. Scenario Completeness

For any test using screenshots, the referenced file under backend/tests/screenshots/ must exist and loadable as PNG.

For browser tests, corresponding mock pages must exist in backend/tests/mock_pages/ with correct selectors.

setup_test_environment.py must generate all directories/files referenced in the tests.

Workspace paths (e.g., workspace_test/) must exist and be properly reset before test execution.

Desktop folder fixtures (Folder1/Folder2) must exist for tests that count folders.

3. Validation Rules Completeness

Each test must specify at least one validation rule under execution_validation when applicable.

Validation fields must include appropriate expectations such as:
text_exact_match, file_exists, file_contains,
element_found, vlm_fallback_used,
screenshot_returned, retry_required,
safety_blocked, error_type.

Negative tests must be included: invalid requests, dangerous operations, missing UI elements.

Planner validation must include:
correct task classification, correct steps sequence, and correct parameter mapping.

4. Coverage Completeness

Planner coverage: at least one test for simple tasks, compound tasks, ambiguous tasks, and invalid tasks.

Vision coverage: OCR, multiple similar text, blurred UI, missing text, VLM fallback.

Browser coverage: open_url, input, click, extract_text, extract_image, slow-load or missing elements.

Safety coverage: blocking dangerous instructions, enforcing workspace, permission errors.

File operations: create, read, write, move, copy, delete.

End-to-end coverage: at least two full workflows combining planner â†’ execute chain.

5. Backend Test Support Readiness

/api/ai/plan must have safety gate and stable JSON formatting.

/api/ai/execute must support EXECUTOR_TEST_MODE (stub UI, real file ops).

test_planner must be deterministic and not rely on external LLM behavior.

The runner test_user_view_cases.py must successfully load fixtures and run through all test cases.

6. Determinism Requirements

No test may depend on real internet connectivity.

No test may depend on nondeterministic system state or timing.

All mock pages and screenshots must be static and local.

Planner output must not rely on LLM randomness.

Executor behavior must be deterministic when EXECUTOR_TEST_MODE=1.

7. If Any Checklist Item Fails

Codex must:

Modify or extend test cases.

Fix missing fixtures or update setup_test_environment.py.

Update backend behavior, schemas, or selectors if the inconsistency originates from code.

Re-run checklist validation until all items pass.